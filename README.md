# twitter_bot_gemini
Geminiを使用してツイート内容を自動生成、返答までしてくれるbotプログラム  
このプログラムは、X APIのfreeプランではツイートの読み取りができず、自分のツイートについたリプライを取得できないため自動返信ボットが作れないという問題を、Gemini APIで無理やり解決してしまおうというプログラムです。  
アカウントを返信用と投稿用に分け、X API制限も回避できるようにしています  

#### 動作する仕組み
まず必要なもの   
常時稼働しても大丈夫な適当なlinuxマシン一台  
常時稼働させても問題ないandroidタブレット（画面領域の都合でスマホは非推奨だが、可）  
scrcpy  
gnome-screenshot  
  
動作の流れ  
投稿用ボットは４時間に一回、自動生成した文章をツイートするだけです  
  
返信用ボットは  
ツイッターの通知画面をタブレットでつけっぱなしにして、それをscrcpy経由でパソコンに取り込む  
↓  
取り込んだ通知画面を一時間に一回スクリーンショットしてgemini-2.0-flashに解析させる    
↓  
解析して取得したユーザー名やリプライの内容をまたgemini-2.0-flashに送信していい感じのメンションツイートを生成させる  
↓  
生成したメンションツイートを返信として送信  
という流れです  
  
#### 動かし方  
タブレット側の設定  
まず、androidタブレットに、投稿用botのメインアカウントでログインします。  
開発者向けオプションを使用可能にして、「充電時画面消灯をオフ」「usbデバッグ」を使用可能にします。  
次に、適当なオートクリッカー（おすすめはhttps://apkpure.com/jp/auto-clicker-auto-tapper/autoclicker.clicker.autoclickerapp.autoclickerforgames　）　をインストールして、Xの通知画面が一時間に一回更新＆一番上までスクロールされるようないい感じのマクロを組みます。  
パソコン側の設定  
まず、Xのデベロッパーポータルにアクセスして開発者として登録し、APIキーなどもろもろを取得します。  
gemini APIはgoogle cloudから取得してください。（このAPIキーは二つのプログラムで使いまわすことを推奨）  
そしてプログラム内のAPIキーの空欄や、自分のアカウント名（YOUR_TARGET_NAME）の部分を置き換えてください。  
次にpythonをインストールします（やり方はhttps://www.python.jp/install/ubuntu/index.html　）  
そしてpipコマンドと仮想環境作成用の何かをインストールします  
```
sudo apt update
sudo apt install python3-venv python3-pip
```
次に適当なディレクトリを、投稿用プログラム用に一つ、リプライ用プログラム用に一つ作成し、プログラム本体を配置します。    
そこでpythonの仮想環境を作成して、有効化し、その環境に    
1 投稿用プログラムのほうの場合     
```
pip install google-generativeai tweepy
```
2 リプライ用プログラムの場合  
```
pip3 install google-generativeai tweepy pillow python-xlib
```
をインストールします  
そのあと、scrcpyとgnome-screenshotをインストールします。これで準備は多分完了です。  

実行  
それぞれのプログラムを実行してください  
リプライ用ボットのほうはscrcpyを起動した後に、プログラムを実行し、５秒以内にscrcpyのウィンドウをアクティブにしてください。  
  
これでたぶん動きます。  
わからない点があったら製作者のツイッターアカウントにお気軽にDMしてください。  
それかリプライに書いてもらえば対応します。  

#### 最後に  
このプログラムでAIに渡すプロンプトはプレースホルダーとして私が普段使用しているものを乗せています。  ここはいい感じに変更してください。これらのコードのほとんどはgemini-2.5-proによって書かれました。


